{% extends 'core/base.html' %}

{% load htmlattributes %}

{% block title %}
    {% if form.instance.id %}Edit {% else %}Add {% endif %}Event
{% endblock %}

{% block content %}
    <h2>
        {% if form.instance.id %}Edit{% else %}Add{% endif %} Event
        <span class="pull-right">
            <a class="btn btn-default" role="button" data-toggle="collapse" href="#help" aria-expanded="false"
               aria-controls="help">
                <span class="glyphicon glyphicon-question-sign"></span>
            </a>
        </span>
    </h2>

    <div class="collapse" id="help">
        <div class="well">
            <h4>Instructions</h4>
            <ul>
                <li>Required fields are indicated with a red asterisk</li>
                <li>In order to select attendees they must already be contacts in the system</li>
                <li>Scroll to the bottom of the screen and click Save to save your changes</li>
            </ul>
        </div>
    </div>

    <form action="" method="post" class="form-horizontal">
        {% csrf_token %}
        {{ form.media }}
        <div class="form-group required{% if form.organization.errors %} has-error{% endif %}">
            <label for="{{ form.organization.auto_id }}" class="col-sm-2 control-label">Organization</label>
            <div class="col-sm-4">
                {{ form.organization|htmlattributes:'class:form-control' }}
                {% if form.organization.errors %}
                    <p class="help-inline text-danger">{{ form.organization.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group required{% if form.name.errors %} has-error{% endif %}">
            <label for="{{ form.name.auto_id }}" class="col-sm-2 control-label">Name</label>
            <div class="col-sm-4">
                {{ form.name|htmlattributes:'class:form-control' }}
                {% if form.name.errors %}
                    <p class="help-inline text-danger">{{ form.name.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group required{% if form.start_date.errors %} has-error{% endif %}">
            <label for="{{ form.start_date.auto_id }}" class="col-sm-2 control-label">Start Date</label>
            <div class="col-sm-2">
                {{ form.start_date|htmlattributes:'class:form-control' }}
                {% if form.start_date.errors %}
                    <p class="help-inline text-danger">{{ form.start_date.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group required{% if form.start_time.errors %} has-error{% endif %}">
            <label for="{{ form.start_time.auto_id }}" class="col-sm-2 control-label">Start Time</label>
            <div class="col-sm-2">
                {{ form.start_time|htmlattributes:'class:form-control' }}
                <p class="help-inline small">{{ form.start_time.help_text }}</p>
                {% if form.start_time.errors %}
                    <p class="help-inline text-danger">{{ form.start_time.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.end_date.errors %} has-error{% endif %}">
            <label for="{{ form.end_date.auto_id }}" class="col-sm-2 control-label">End Date</label>
            <div class="col-sm-2">
                {{ form.end_date|htmlattributes:'class:form-control' }}
                {% if form.end_date.errors %}
                    <p class="help-inline text-danger">{{ form.end_date.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.end_time.errors %} has-error{% endif %}">
            <label for="{{ form.end_time.auto_id }}" class="col-sm-2 control-label">End Time</label>
            <div class="col-sm-2">
                {{ form.end_time|htmlattributes:'class:form-control' }}
                <p class="help-inline small">{{ form.end_time.help_text }}</p>
                {% if form.end_time.errors %}
                    <p class="help-inline text-danger">{{ form.end_time.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.location.errors %} has-error{% endif %}">
            <label for="{{ form.location.auto_id }}" class="col-sm-2 control-label">Location</label>
            <div class="col-sm-4">
                {{ form.location|htmlattributes:'class:form-control' }}
                {% if form.location.errors %}
                    <p class="help-inline text-danger">{{ form.location.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.address_1.errors %} has-error{% endif %}">
            <label for="{{ form.address_1.auto_id }}" class="col-sm-2 control-label">Address</label>
            <div class="col-sm-4">
                {{ form.address_1|htmlattributes:'class:form-control' }}
                {% if form.address_1.errors %}
                    <p class="help-inline text-danger">{{ form.address_1.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.address_2.errors %} has-error{% endif %}">
            <label for="{{ form.address_2.auto_id }}" class="col-sm-2 control-label">Address (cont.)</label>
            <div class="col-sm-4">
                {{ form.address_2|htmlattributes:'class:form-control' }}
                {% if form.address_2.errors %}
                    <p class="help-inline text-danger">{{ form.address_2.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.city.errors %} has-error{% endif %}">
            <label for="{{ form.city.auto_id }}" class="col-sm-2 control-label">City</label>
            <div class="col-sm-4">
                {{ form.city|htmlattributes:'class:form-control' }}
                {% if form.city.errors %}
                    <p class="help-inline text-danger">{{ form.city.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.state.errors %} has-error{% endif %}">
            <label for="{{ form.state.auto_id }}" class="col-sm-2 control-label">State</label>
            <div class="col-sm-2">
                {{ form.state|htmlattributes:'class:form-control' }}
                {% if form.state.errors %}
                    <p class="help-inline text-danger">{{ form.state.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.zip.errors %} has-error{% endif %}">
            <label for="{{ form.zip.auto_id }}" class="col-sm-2 control-label">Zip</label>
            <div class="col-sm-2">
                {{ form.zip|htmlattributes:'class:form-control' }}
                {% if form.zip.errors %}
                    <p class="help-inline text-danger">{{ form.zip.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.contact.errors %} has-error{% endif %}">
            <label for="{{ form.contact.auto_id }}" class="col-sm-2 control-label">Contact</label>
            <div class="col-sm-4">
                {{ form.contact|htmlattributes:'class:form-control' }}
                {% if form.contact.errors %}
                    <p class="help-inline text-danger">{{ form.contact.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.attendees.errors %} has-error{% endif %}">
            <label for="{{ form.attendees.auto_id }}" class="col-sm-2 control-label">Attendees</label>
            <div class="col-sm-4">
                {{ form.attendees|htmlattributes:'class:form-control' }}
                {% if form.attendees.errors %}
                    <p class="help-inline text-danger">{{ form.attendees.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group{% if form.url.errors %} has-error{% endif %}">
            <label for="{{ form.url.auto_id }}" class="col-sm-2 control-label">URL</label>
            <div class="col-sm-4">
                {{ form.url|htmlattributes:'class:form-control' }}
                {% if form.url.errors %}
                    <p class="help-inline text-danger">{{ form.url.errors|striptags }}</p>
                {% endif %}
            </div>
        </div>
        <div class="form-group">
            <label for="{{ form.details.auto_id }}" class="col-sm-2 control-label">Details</label>
            <div class="col-sm-4">
                {{ form.details }}
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </div>
    </form>
{% endblock %}

{% block extra_scripts %}
    <script>
        $(document).ready(function() {
            $("#{{ form.start_date.auto_id }}").datepicker();
            $("#{{ form.end_date.auto_id }}").datepicker();
        });
    </script>
{% endblock %}
